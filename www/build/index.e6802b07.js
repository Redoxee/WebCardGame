let t;class e{constructor(t,e){null===t?(this.x=0,this.y=0):(this.x=t,this.y=e)}toString(){return`(${this.x}, ${this.y})`}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){let t=this.length();return this.x=this.x/t,this.y=this.y/t,this}norm(){let t=this.length();return new e(this.x/t,this.y/t)}scale(t){return new e(this.x*t,this.y*t)}static dot(t,e){return t.x*e.x+t.y*e.y}static cross(t,e){return new n(0,0,t.x*e.y-t.y*e.x)}static add(t,n){return new e(t.x+n.x,t.y+n.y)}static sub(t,n){return new e(t.x-n.x,t.y-n.y)}static equal(t,e){return t.x===e.x&&t.y===e.y}}e.Zero=new e(0,0);class n{constructor(t,e,n){null===t?(this.x=0,this.y=0,this.z=0):(this.x=t,this.y=e,this.z=n)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let t=this.length();return this.x=this.x/t,this.y=this.y/t,this.z=this.z/t,this}norm(){let t=this.length();return new n(this.x/t,this.y/t,this.z/t)}scale(t){return new n(this.x*t,this.y*t,this.z*t)}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static cross(t,e){return new n(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}static add(t,e){return new n(t.x+e.x,t.y+e.y,t.z+e.z)}static sub(t,e){return new n(t.x-e.x,t.y-e.y,t.z-e.z)}static equal(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}}n.Zero=new n(0,0,0),n.Up=new n(0,1,0),n.Down=new n(0,-1,0),n.Left=new n(-1,0,0),n.Right=new n(1,0,0),n.Forward=new n(0,0,-1),n.Backward=new n(0,0,1);const i="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var r={randomUUID:i};const o=new Uint8Array(16),s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));var a=function(e,n,i){if(r.randomUUID&&!n&&!e)return r.randomUUID();e=e||{};let a=e.random||(e.rng||function(){// lazy load so that environments that need to polyfill have a chance to do so
if(!t&&!// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(o)})();// Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){i=i||0;for(let t=0;t<16;++t)n[i+t]=a[t];return n}return function(t,e=0){// Note: Be careful editing this code!  It's been tuned for performance
// and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
return s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]}(a)};function c(t){let e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,right:e.right+window.pageXOffset,bottom:e.bottom+window.pageYOffset,left:e.left+window.pageXOffset,centerX:e.left+window.pageXOffset+(e.right-e.left)/2,centerY:e.top+window.pageYOffset+(e.bottom-e.top)/2,width:e.right-e.left,height:e.top-e.bottom}}class h{}h.EaseInOut={p1x:.32,p1y:0,p2x:.5,p2y:1},h.Linear={p1x:.32,p1y:.32,p2x:.75,p2y:.75},h.DefaultBezierParams={p1x:.5,p1y:.5,p2x:.5,p2y:.5};let l=0,d=0;const u=[];!function t(e){let n=performance.now();d=n-l,l=n,u.forEach(t=>{t.animationFrame(d)}),requestAnimationFrame(t)}(performance.now());class m{constructor(t,n){this.target=t,this.rotationFactor=n,this.duration=0,this.p0=e.Zero,this.p1=e.Zero,this.travel=e.Zero,this.endTime=0,this.elapsedTime=0,this.startTime=-1,this.bezierParams=h.DefaultBezierParams,this.direction=e.Zero}startAnimation(t,n,i,r){this.p0=t,this.p1=n;let o=e.sub(n,t).length();this.duration=o/i,this.startTime=performance.now()-d,this.endTime=this.startTime+this.duration,this.elapsedTime=0,this.travel=e.sub(n,t),this.direction=this.travel.norm(),this.bezierParams=r,u.find(t=>t===this)||u.push(this)}animationFrame(t){if(this.elapsedTime+=t,this.elapsedTime>this.duration||0===this.duration){this.target.root.style.left=`${this.p1.x}px`,this.target.root.style.top=`${this.p1.y}px`,this.target.setOrientation(e.Zero),u.splice(u.findIndex(t=>t===this),1);return}let n=this.elapsedTime/this.duration,i=this.rotationFactor,r=function(t,n){let i=t*t,r=i*t,o=3*r-6*i+3*t,s=-3*r+3*i,a=n.p1x*o+n.p2x*s+r,c=n.p1y*o+n.p2y*s+r;return new e(a,c)}(n,this.bezierParams),o=e.add(this.p0,this.travel.scale(r.y));this.target.root.style.left=`${o.x}px`,this.target.root.style.top=`${o.y}px`;let s=(function(t,n){let i=t*t,r=9*i-12*t+3,o=-9*i+6*t,s=n.p1x*r+n.p2x*o+3*i,a=n.p1y*r+n.p2y*o+3*i;return new e(s,a)})(n,this.bezierParams).scale(i);this.target.setOrientation(this.direction.scale(s.y))}}const y=document.getElementById("game-board"),p=document.getElementById("card-root");function x(t){let e=`PresentationCard${a()}`;t.classList.add(e);let i=document.querySelector(`.${e} #card`),r=document.querySelector(`.${e} #card-item`),o=document.querySelector(`.${e} #shine`),s=document.querySelector(`.${e} #shade`),c={lightDirection:new n(.15,-1,.25).normalize(),simHeight:190,lightPower:1.5,shadowDistance:5},h=function(t,e){let i=t.root;i.root=t.root;let r=t.zoomable,o={x:e.shadowDistance*n.dot(e.lightDirection,n.Left),y:e.shadowDistance*n.dot(e.lightDirection,n.Down)};t.cardItem.style.filter=`drop-shadow(${o.x}px ${o.y}px 5px black)`;let s=new n(-e.lightDirection.x,-e.lightDirection.y,e.lightDirection.z);i.setOrientation=i=>{let r=Math.atan2(Math.abs(i.x),e.simHeight),o=0===i.x?0:i.x>0?r:-r,a=Math.atan2(Math.abs(i.y),e.simHeight),c=0===i.y?0:i.y>0?-a:a,h=function(t,e,i){let r=Math.cos(e),o=Math.sin(e),s=Math.cos(i),a=Math.sin(i);return new n(t.x*r+t.z*o,t.x*o*a+t.y*s-t.z*a*r,-t.x*o*s+t.y*a+t.z*r*s)}(n.Backward,o,c),l=Math.pow(n.dot(h,e.lightDirection),e.lightPower);t.cardItem.style.transform=`rotateY(${o}rad) rotateX(${c}rad)`,t.shine.style.opacity=`${100*l}%`;let d=Math.pow(n.dot(h,s),e.lightPower);t.shade.style.opacity=`${100*d}%`};let c=function(t){let e=`${t.className}-${a()}`;var n=document.createElement("style");return n.type="text/css",n.innerHTML=`${t.className?`.${e}`:""} ${t.id?`#${t.id}`:""} { ${t.content} }`,document.getElementsByTagName("head")[0].appendChild(n),e}({className:"zoomin",content:"transition: transform 0.25s ease-out;"});return r.classList.add(c),i.setZoom=t=>{r.style.transform=`scale(${t})`},i.setSmoothOrientation=e=>{e?t.cardItem.classList.contains(c)||t.cardItem.classList.add(c):t.cardItem.classList.contains(c)&&t.cardItem.classList.remove(c)},i.lerpAnimator=new m(i,100),i}({root:t,zoomable:i,cardItem:r,shine:o,shade:s},c);return h}const g=x(p);let w=null,f=!1,z=0;function $(t){f&&(g.setSmoothOrientation(!0),g.setZoom(1)),w=t,g.setSmoothOrientation(!1),z=performance.now()}function v(){let t=performance.now()-z;t<500&&(f?(f=!1,g.setZoom(1)):(f=!0,g.setZoom(2))),w&&(w=null)}function E(t,n,i){if(f){let r=c(g),o=new e(n-r.centerX,i-r.centerY);t.setOrientation(o)}}function b(t){t.root.addEventListener("mousedown",e=>{$(t)}),t.root.addEventListener("mouseup",t=>{//endInput();
}),t.root.addEventListener("pointerleave",n=>{f&&(f=!1,t.setZoom(1),t.setOrientation(e.Zero))}),t.root.addEventListener("touchstart",t=>{let e=t.target;$(e)},!1),t.root.addEventListener("touchcancel",t=>{v()},!1),t.root.addEventListener("touchend",t=>{v()},!1),t.root.addEventListener("mousemove",e=>{E(t,e.clientX,e.clientY)}),t.root.addEventListener("touchmove",e=>{let n=e.targetTouches[0];E(t,n.clientX,n.clientY)})}b(g);const I=document.getElementById("test-button"),L=[document.getElementById("target-1"),document.getElementById("target-2"),document.getElementById("target-3"),document.getElementById("target-4")];let D=0;function O(t,n,i){let r=c(t.root),o=new e(r.centerX,r.centerY),s=new e(n,i),a=e.sub(s,o).length(),l=(a-45)/135;l<0?l=0:l>1&&(l=1),// Applying a ramp
l*=l;// converting to speed
let d=1.9000000000000001*l+.8;t.lerpAnimator.startAnimation(o,s,d,h.Linear)}I.addEventListener("click",t=>{D=(D+1)%L.length;let n=c(g.root),i=c(L[D]);g.lerpAnimator.startAnimation(new e(n.centerX,n.centerY),new e(i.centerX,i.centerY),.65,h.EaseInOut)}),y.addEventListener("mousemove",t=>{w&&O(w,t.clientX,t.clientY)}),y.addEventListener("touchmove",t=>{if(w){let e=t.targetTouches[0];O(w,e.clientX,e.clientY-150)}}),y.addEventListener("mouseup",()=>{v()});const T=p.cloneNode(!0);y.appendChild(T);const X=x(T);b(X);const Y=c(T);X.lerpAnimator.startAnimation(new e(Y.centerX,Y.centerY),new e(600,300),.5,h.EaseInOut);//setupSandboxCurves(presentationCard.lerpAnimator.getBezierParams(1));
//# sourceMappingURL=index.e6802b07.js.map

//# sourceMappingURL=index.e6802b07.js.map
