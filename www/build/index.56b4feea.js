let t;class e{constructor(t,e){null===t?(this.x=0,this.y=0):(this.x=t,this.y=e)}toString(){return`(${this.x}, ${this.y})`}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){let t=this.length();return this.x=this.x/t,this.y=this.y/t,this}norm(){let t=this.length();return new e(this.x/t,this.y/t)}scale(t){return new e(this.x*t,this.y*t)}static dot(t,e){return t.x*e.x+t.y*e.y}static cross(t,e){return new n(0,0,t.x*e.y-t.y*e.x)}static add(t,n){return new e(t.x+n.x,t.y+n.y)}static sub(t,n){return new e(t.x-n.x,t.y-n.y)}static equal(t,e){return t.x===e.x&&t.y===e.y}}e.Zero=new e(0,0);class n{constructor(t,e,n){null===t?(this.x=0,this.y=0,this.z=0):(this.x=t,this.y=e,this.z=n)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let t=this.length();return this.x=this.x/t,this.y=this.y/t,this.z=this.z/t,this}norm(){let t=this.length();return new n(this.x/t,this.y/t,this.z/t)}scale(t){return new n(this.x*t,this.y*t,this.z*t)}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static cross(t,e){return new n(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}static add(t,e){return new n(t.x+e.x,t.y+e.y,t.z+e.z)}static sub(t,e){return new n(t.x-e.x,t.y-e.y,t.z-e.z)}static equal(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}}n.Zero=new n(0,0,0),n.Up=new n(0,1,0),n.Down=new n(0,-1,0),n.Left=new n(-1,0,0),n.Right=new n(1,0,0),n.Forward=new n(0,0,-1),n.Backward=new n(0,0,1);const i="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var r={randomUUID:i};const o=new Uint8Array(16),s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));var a=function(e,n,i){if(r.randomUUID&&!n&&!e)return r.randomUUID();e=e||{};let a=e.random||(e.rng||function(){// lazy load so that environments that need to polyfill have a chance to do so
if(!t&&!// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(o)})();// Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){i=i||0;for(let t=0;t<16;++t)n[i+t]=a[t];return n}return function(t,e=0){// Note: Be careful editing this code!  It's been tuned for performance
// and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
return s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]}(a)};function c(t){let e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,right:e.right+window.pageXOffset,bottom:e.bottom+window.pageYOffset,left:e.left+window.pageXOffset,centerX:e.left+window.pageXOffset+(e.right-e.left)/2,centerY:e.top+window.pageYOffset+(e.bottom-e.top)/2,width:e.right-e.left,height:e.top-e.bottom}}const h=document.getElementById("container"),l=document.getElementById("card"),d=document.getElementById("card-item"),u=document.getElementById("shine"),y=document.getElementById("unshine"),m={lightDirection:new n(.15,-1,.25).normalize(),simHeight:190,lightPower:1.5,shadowDistance:5},p=function(t,e){let i=t.root;i.root=t.root;let r=t.zoomable,o={x:e.shadowDistance*n.dot(e.lightDirection,n.Left),y:e.shadowDistance*n.dot(e.lightDirection,n.Down)};t.cardItem.style.filter=`drop-shadow(${o.x}px ${o.y}px 5px black)`;let s=new n(-e.lightDirection.x,-e.lightDirection.y,e.lightDirection.z);i.setOrientation=i=>{let r=Math.atan2(Math.abs(i.x),e.simHeight),o=0===i.x?0:i.x>0?r:-r,a=Math.atan2(Math.abs(i.y),e.simHeight),c=0===i.y?0:i.y>0?-a:a,h=function(t,e,i){let r=Math.cos(e),o=Math.sin(e),s=Math.cos(i),a=Math.sin(i);return new n(t.x*r+t.z*o,t.x*o*a+t.y*s-t.z*a*r,-t.x*o*s+t.y*a+t.z*r*s)}(n.Backward,o,c),l=Math.pow(n.dot(h,e.lightDirection),e.lightPower);t.cardItem.style.transform=`rotateY(${o}rad) rotateX(${c}rad)`,t.shine.style.opacity=`${100*l}%`;let d=Math.pow(n.dot(h,s),e.lightPower);t.shade.style.opacity=`${100*d}%`};let c=function(t){let e=`${t.className}-${a()}`;var n=document.createElement("style");return n.type="text/css",n.innerHTML=`${t.className?`.${e}`:""} ${t.id?`#${t.id}`:""} { ${t.content} }`,document.getElementsByTagName("head")[0].appendChild(n),e}({className:"zoomin",content:"transition: transform 0.25s ease-out;"});return r.classList.add(c),i.setZoom=t=>{r.style.transform=`scale(${t})`},i.setSmoothOrientation=e=>{e?t.cardItem.classList.contains(c)||t.cardItem.classList.add(c):t.cardItem.classList.contains(c)&&t.cardItem.classList.remove(c)},i}({root:h,zoomable:l,cardItem:d,shine:u,shade:y},m);let g=!1;function x(){p.setZoom(2),p.setSmoothOrientation(!1),g=!0}function w(){g&&(p.setZoom(1),p.setSmoothOrientation(!0),p.setOrientation(e.Zero),g=!1)}h.addEventListener("mousedown",t=>{x()}),h.addEventListener("mouseup",t=>{w()}),h.addEventListener("pointerleave",t=>{w()}),h.addEventListener("mousemove",t=>{if(g){let n=t.target,i=c(n),r=new e(t.clientX-i.centerX,t.clientY-i.centerY);p.setOrientation(r)}}),h.addEventListener("touchstart",t=>{x()},!1),h.addEventListener("touchcancel",t=>{w()},!1),h.addEventListener("touchend",t=>{w()},!1),h.addEventListener("touchmove",t=>{if(t.preventDefault(),g){let n=t.target,i=c(n),r=new e(t.touches[0].clientX-i.centerX,t.touches[0].clientY-i.centerY);p.setOrientation(r)}}),p.setOrientation(e.Zero);const f=document.getElementById("test-button"),z=[document.getElementById("target-1"),document.getElementById("target-2"),document.getElementById("target-3"),document.getElementById("target-4")];let $=0;const E=new class{constructor(t,n){this.target=t,this.duration=1e3*n,this.p0=e.Zero,this.p1=e.Zero,this.endTime=0,this.startTime=-1}playAnimation(t,e){this.p0=t,this.p1=e,this.startTime=performance.now(),this.endTime=this.startTime+this.duration,requestAnimationFrame(I)}}(p,2);function I(t){if(E.endTime<t||0===E.duration)return;let n=(t-E.startTime)/E.duration;!function(t,n,i,r){if(e.equal(i,r))return;let o=e.sub(r,i);console.log(`${i} - ${r} = ${o}`);let s=(o.length(),{p1x:.32,p1y:0,p2x:.5,p2y:1}),a=o.norm(),c=function(t,n){let i=t*t,r=i*t,o=3*r-6*i+3*t,s=-3*r+3*i,a=n.p1x*o+n.p2x*s+r,c=n.p1y*o+n.p2y*s+r;return new e(a,c)}(n,s),h=e.add(i,o.scale(c.y));t.root.style.left=`${h.x}px`,t.root.style.top=`${h.y}px`;let l=(function(t,n){let i=t*t,r=9*i-12*t+3,o=-9*i+6*t,s=n.p1x*r+n.p2x*o+3*i,a=n.p1y*r+n.p2y*o+3*i;return new e(s,a)})(n,s).scale(100);t.setOrientation(a.scale(l.y))}(E.target,n,E.p0,E.p1),requestAnimationFrame(I)}f.addEventListener("click",t=>{$=($+1)%z.length;let n=c(p.root),i=c(z[$]);E.playAnimation(new e(n.centerX,n.centerY),new e(i.centerX,i.centerY))});//# sourceMappingURL=index.56b4feea.js.map

//# sourceMappingURL=index.56b4feea.js.map
